<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loki - Subscripciones</title>
  <meta name="description" content="Subscripciones de Loki">
  <meta name="keywords" content="Loki, ChatGPT, Whatsapp, asistente, asistente virtual, Mindblocks, Subscripcion">
  <meta property="og:title" content="Subscripciones de Loki">
  <meta property="og:url" content="/subscriptions">
  <meta property="og:type" content="">
  <meta property="og:description" content="Subscribete y desbloquea todo el poder de ChatGPT desde tu Whatsapp con Loki. ¡No pierdas más tiempo en tareas cotidianas! 
Presentamos a Loki, tu nuevo asistente virtual personalizado con todo el poder de ChatGPT en tu Whatsapp. ">


  <!--ICONS-->
  <link rel="shortcut icon" href="../images/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="../images/apple-touch-icon.png">

  <!--FONTS-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!--TAILWINDCSS-->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.google.com/recaptcha/api.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          gridTemplateRows: {
            'auto1fr': 'auto 1fr'
          },
          colors: {
            grayloki: '#222f3b',
            graylokiMedium: '#35424d',
            yellowloki: '#fdf8d4',
            yellowlokiMedium: '#f4efcb',
            yellowlokiDark: '#dfe1bf',
            greenloki: '#3eb870',
            darkgreenloki: '#0f826a',
            goldloki: '#e6bd59',
            blackloki: '#121518',
            mercadopago: '#009ee3',
          },
          fontFamily: {
            sans: ['Alexandria', 'sans-serif'],
          },

          backgroundImage: {
            'hero': "url('../images/background.jpg')",
            'bottom': "url('../images/line.svg')",
            'points': "url('../images/points.png')",
            'header': "url('../images/bg-header.svg')",
          }
        }
      }
    }
  </script>

  <!--COLLAPSE CSS-->
  <style>
    h2 {
      border-bottom: 0.1em solid #0f826a;
    }

    b,
    strong {
      color: #0f826a;
    }

    .gold-link {
      color: #e6bd59 !important;
    }

    .gold-link:hover {
      text-decoration: underline;
    }

    .filter-yellowlokiMedium {
      filter: invert(99%) sepia(12%) saturate(328%) hue-rotate(342deg) brightness(115%) contrast(91%)
    }
  </style>


</head>

<body class="bg-grayloki font-sans bg-hero bg-auto bg-no-repeat bg-top">

  <!--Header Start-->
  <header class="mx-auto sticky top-0 z-50 bg-header bg-top bg-repeat-x">
    <nav class="drop-shadow-lg  lg:filter-none  bg-grayloki md:bg-transparent">
      <div class="">
        <div class="flex justify-between w-full py-2 md:py-4 px-3 lg:px-4">
          <div class="flex justify-between w-full">
            <!-- Website Logo -->
            <div class="items-center"><a href="https://mindblocks.ai/loki"><img src="../images/logo-loki.svg"
                  width="125" height="59" alt="Loki"></a></div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <div class="main-container flex flex-col">
    <!--Header End-->
    <div class="flex-grow container mx-auto max-w-screen-lg relative mt-8 lg:mt-20 px-6 mb-10 lg:px-0">

      <!--Main Content Start-->
      <section data-aos="fade-down" data-aos-duration="1000" class="flex-grow grid gap-10 z-15 ">
        <!-- Subscription Title -->
        <div id="subscription-form" class="absolute -mt-20 lg:-mt-16"></div>
        <img src="../images/loki-avatar.svg" class="-mb-20 lg:-mb-24 relative z-20 mx-auto overflow" width="203"
          height="205" alt="Loki avatar">
        <div data-aos="fade" data-aos-duration="2000"
          class="container p-6 md:p-14 bg-yellowlokiMedium rounded-lg mx-auto max-w-screen-lg text-grayloki overflow-hidden">

          <!-- Subscription Form -->
          <form id="paymentForm" action="https://dev.loki.api.mindblocks.ai/payments/subscriptions" method="post">
            <div class="grid grid-cols-1 lg:grid-cols-2 mt-4">
              <!-- Phone Input with Tooltip -->
              <div class="mr-0 lg:mr-3 mb-6">
                <label for="phone" class="block">
                  Telefono:
                  <!-- Tooltip Icon and Text -->
                  <span class="hidden md:inline-block ml-1 relative cursor-help">
                    <i class="fas fa-question-circle"></i>
                    <!-- Tooltip Content -->
                    <span
                      class="absolute left-0 mt-6 p-2 w-96 bg-blackloki text-yellowlokiMedium rounded-md text-xs leading-tight"
                      style="transform: translateX(-25%); z-index: 10; display: none;">
                      Tu numero de telefono tal cual aparece en tu cuenta de WhatsApp<br>
                      Sin espacios, guiones o parentesis.<br><br>
                      Por ejemplo: (+598) 098 55-1234 -> <a class="gold-link">59898551234</a>
                    </span>
                  </span>
                </label>
                <input type="tel" id="phone" name="phone" placeholder="59898123456" required
                  class="block w-full bg-yellowlokiDark rounded-lg  p-1 py-1 px-2 focus:outline-none focus:ring-1 focus:ring-amber-500 invalid:border-red-500 invalid:border-red-500 focus:invalid:border-red-500 focus:invalid:border-red-500">
              </div>

              <!-- Plan Selector with Tooltip -->
              <div class="ml-0 lg:ml-3 mb-6">
                <label for="plan" class="block">
                  Selecciona el Plan:
                  <!-- Tooltip Icon and Text -->
                  <span class="hidden md:inline-block ml-1 relative cursor-help">
                    <i class="fas fa-question-circle"></i>
                    <!-- Tooltip Content -->
                    <span
                      class="absolute left-0 mt-6 p-2 w-96 bg-blackloki text-yellowlokiMedium rounded-md text-xs leading-tight"
                      style="transform: translateX(-45%); z-index: 10; display: none;">
                      Para más información visita nuestra seccion de planes: <br><br> <a
                        href="https://mindblocks.ai/loki#planes"
                        class="gold-link">https://mindblocks.ai/loki#planes</a>.
                    </span>
                  </span>
                </label>
                <select id="plan" name="plan_display" required
                  class="block w-full bg-yellowlokiDark rounded-lg p-1 py-1 px-2 focus:outline-none focus:ring-1 focus:ring-amber-500 invalid:border-red-500 invalid:border-red-500 focus:invalid:border-red-500 focus:invalid:border-red-500"
                  onchange="updatePlanLink()">
                  <option value="standard">Standard</option>
                  <option value="premium">Premium</option>
                </select>
                <input id="plan-hidden" type="hidden" name="plan" value="standard">
              </div>
            </div>

            <div class="ml-0 mr-0 lg:ml-20 lg:mr-20 mb-12 hidden">
              <label for="preapproval_id" class="block mb-2">
                Id de Pago:
                <!-- Tooltip Icon and Text -->
                <span class="hidden md:inline-block ml-1 relative cursor-help">
                  <i class="fas fa-question-circle"></i>
                  <!-- Tooltip Content -->
                  <span
                    class="absolute left-0 mt-6 p-2 w-96 bg-blackloki text-yellowlokiMedium rounded-md text-xs leading-tight"
                    style="transform: translateX(-30%); z-index: 10; display: none;">
                    El ID de pago se obtiene al finalizar la compra, luego de hacer click en el boton "Volver al sitio".
                  </span>
                </span>
              </label>
              <input required readonly type="text" id="preapproval_id" name="preapproval_id" required
                class="lg:text-center w-full p-2 border border-grayloki rounded-md">
            </div>

            <!-- Payment Button -->
            <div id="mercadopagoContainer" class="mt-2 lg:mt-4 mx-auto text-center text-xs md:text-md">
              <p>Por Favor, no olvides hacer click en el boton de <a
                  class="px-1.5 md:px-4 py-0.5 md:py-1.5 rounded-md bg-mercadopago font-medium text-white">Volver al
                  sitio</a> al finalizar
                el
                pago.</p>
              <p class="mt-2">
                <b>¡Es la única forma de completar el proceso de subscripción!</b>
                <!-- Tooltip Icon and Text -->
                <span class="hidden md:inline-block ml-1 relative cursor-help">
                  <i class="fas fa-question-circle"></i>
                  <!-- Tooltip Content -->
                  <span
                    class="absolute left-0 mt-2 p-2 w-96 bg-blackloki text-yellowlokiMedium rounded-md text-xs leading-tight"
                    style="transform: translateX(-90%); z-index: 10; display: none;">
                    Ante cualquier inconveniente comunicate con nosotros a traves de <a
                      href="https://mindblocks.ai/loki#planes"
                      class="gold-link">https://mindblocks.ai/loki#contacto</a>.
                  </span>
                </span>
              </p>
              <a id="mercadopagoButton">
                <img class="mx-auto mt-6"
                  src="https://http2.mlstatic.com/storage/dx-devsite/docs-assets/images/cow/cow-visual-wallet-default.es.png?v=4.8.3"
                  alt="cow-visual-wallet-default">
              </a>
            </div>

            <p id="subscription-error" class="text-red-500 mb-5 hidden">Mensaje de error</p>
            <!-- Confirmation Button (hidden by default, will show after payment) -->
            <div class="mt-2 mb-16 lg:mb-0 text-center">
              <img id="loading-spinner" src="../images/spinner.gif" class="hidden mx-auto w-1/12" alt="Enviando...">
              <button id="confirmationButton" data-sitekey="6LeCIFgoAAAAAOeUuh9LiJPG4drCh4EoO9BTn2cb"
                data-callback='onSubmit' type="submit"
                class="g-recaptcha px-7 py-3 rounded-md bg-darkgreenloki text-yellowlokiMedium font-medium hover:bg-greenloki hidden">
                ¡Subscribirse a Loki!
              </button>
              <a href="https://wa.me/59893476717?text=Volvi!" id="lokiRedirect" target="_blank"
                class="bg-greenloki text-lg md:text-base px-6 py-3 my-4 inline-block text-yellowlokiMedium rounded-full shadow-lg hover:opacity-70 transition ease-in-out duration-500 hidden"><img
                  src="../images/whatsapp-icon.svg" alt="" width="26" height="26"
                  class="float-left mr-3 filter-yellowlokiMedium">¡Volver con Loki!</a>
              <p id="subscription-success" class="text-amber-600 text-center mt-4 hidden">¡La Subscripción se procesó
                correctamente!</p>
            </div>
          </form>
        </div>
      </section>
      <!--Main Content End-->
    </div>

    <!--Footer Section Start-->
    <section class="bg-yellowloki bg-auto bg-points bg-center bg-bottom bg-no-repeat relative">
      <p class="px-6 text-center text-darkgreenloki pt-3 lg:pt-12 pb-3 lg:pb-12">© 2023 Mindblocks</p>
      <div class="bg-bottom bg-auto bg-repeat-y h-4 block bg-contain lg:bg-cover"></div>
    </section>
    <!--Footer Section End-->
  </div>



  <!-- JavaScript to handle the payment and confirmation buttons -->
  <script>
    async function onSubmit(token) {
      const form = document.getElementById("paymentForm");
      document.getElementById('subscription-error').classList.add('hidden');

      if (!form.checkValidity()) {
        form.reportValidity()
        return;
      }

      const button = document.getElementById('confirmationButton');
      const spinner = document.getElementById('loading-spinner')

      button.disabled = true;
      button.classList.add('hidden');
      spinner.classList.remove('hidden');

      const formData = new FormData(form);

      const response = await fetch(form.action, {
        method: 'POST',
        body: formData
      });

      const responseData = await response.json();

      console.log(responseData);

      if (response.ok) {
        document.getElementById('lokiRedirect').classList.remove('hidden');
        document.getElementById('subscription-success').classList.remove('hidden');
      } else {
        document.getElementById('subscription-error').classList.remove('hidden');
        document.getElementById('subscription-error').innerHTML = responseData.message;
        button.disabled = false;
        button.classList.remove('hidden');
      }

      spinner.classList.add('hidden');
    }

    function adjustHeight() {
      const headerHeight = document.querySelector('header').offsetHeight;
      const mainDiv = document.querySelector('.main-container');
      mainDiv.style.minHeight = `calc(100vh - ${headerHeight}px)`;
    }

    // Initial call
    adjustHeight();

    // Adjust height on window resize
    window.addEventListener('resize', adjustHeight);

    function getParameterByName(name, localStorageCheck, url) {
      if (!url) url = window.location.href;
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);

      if (!results && !localStorageCheck) return null;

      if (!results && localStorageCheck) return (localStorage.getItem(name) || null);

      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function isValidPhone(value) {
      const phonePattern = /^[+]?[\d\s-]{7,15}$/;
      return phonePattern.test(value);
    }

    function isValidPlan(value) {
      const allowedPlans = ["standard", "premium"];
      return allowedPlans.includes(value);
    }

    // function isValidPreaprovalPlanId(value) {
    //   const allowedPreapprovalPlanIds = ["P-0VW10508YD046711UL5Z4Z4A", "P-0VW10508YD046711UL5Z4Z4A"];
    //   return allowedPreapprovalPlanIds.includes(value);
    // }

    // Using the function to prepopulate form fields
    window.onload = function () {
      ["phone", "plan", "preapproval_id"].forEach(function (id) {
        var value = getParameterByName(id, id != 'preapproval_id');

        if (id === 'phone' && !isValidPhone(value)) return;
        if (id === 'plan' && !isValidPlan(value)) return;
        // if (id === 'preapproval_id' && !isValidPreaprovalId(value)) return;

        if (value) {
          element = document.getElementById(id)
          element.value = value;

          if (id != "plan") {
            element.setAttribute("readonly", "readonly");
            element.classList.add("opacity-70");
          }

          localStorage.setItem(id, value);
        }
      });

      if (document.getElementById("preapproval_id").value == "") {
        updatePlanLink()
      } else {
        document.getElementById("plan").setAttribute("disabled", "disabled")
        document.getElementById("mercadopagoContainer").classList.add('hidden');
        document.getElementById('confirmationButton').classList.remove('hidden');
      }

      // Display the tooltip on hover
      const tooltips = document.querySelectorAll('.cursor-help');

      tooltips.forEach(tooltip => {
        tooltip.addEventListener('mouseover', () => {
          tooltip.querySelector('span').style.display = 'block';
        });
        tooltip.addEventListener('mouseout', () => {
          tooltip.querySelector('span').style.display = 'none';
        });
      });
    }

    // Update the MercadoPago checkout button link given the plan
    function updatePlanLink(e) {
      plan = document.getElementById("plan")
      localStorage.setItem("plan", plan.value);

      document.getElementById("plan-hidden").value = plan.value;

      if (plan.value == "standard") {
        document.getElementById("mercadopagoButton").setAttribute("href", "https://www.mercadopago.com.uy/subscriptions/checkout?preapproval_plan_id=2c9380848af39989018af8fd5c360464");
      } else if (plan.value == "premium") {
        document.getElementById("mercadopagoButton").setAttribute("href", "https://www.mercadopago.com.uy/subscriptions/checkout?preapproval_plan_id=2c9380848af39989018af90c69c50469");
      }
    }

  </script>
  <!--AOS ANIMATION-->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init();
  </script>
</body>

</html>